Below are **clean, structured Markdown notes** converted from your content.
Iâ€™ve **removed Medium-specific noise**, fixed grammar lightly, and organized it to be **interview + revision friendly**.

---

# ğŸ³ Docker Volumes â€“ Real-Time Notes (Beginner to Production)

## Docker Core Pillars

Docker mainly works around **4 pillars**:

1. **Images**
2. **Containers**
3. **Volumes**
4. **Networks**

This note focuses on **Docker Volumes**.

---

## ğŸ“¦ What Are Docker Volumes?

A **Docker Volume** is a mechanism to **store data outside the container filesystem**.

### Why volumes?

- Container writable layer is **temporary**
- Data is **lost** when a container is removed
- Volumes allow **data persistence**
- Volumes can be **shared across multiple containers**

### Simple analogy

- **Container** â†’ Whiteboard (data erased after meeting)
- **Volume** â†’ Notebook (data persists)

---

## âš ï¸ Production Problem Solved by Volumes

In production:

- Multiple containers run the **same service**
- Configuration & data must stay **in sync**
- Volumes allow **shared data**
- Any update in one container reflects in all others

---

## ğŸ”‘ Volume vs Container Data

| Location                 | Persistence       |
| ------------------------ | ----------------- |
| Container writable layer | âŒ Lost on delete |
| Docker Volume            | âœ… Persistent     |
| Bind Mount               | âœ… Persistent     |

---

## ğŸ“Œ Common Docker Volume Commands

### Create a volume

```bash
docker volume create volume-name
```

### List volumes

```bash
docker volume ls
```

### Inspect a volume

```bash
docker volume inspect volume-name
```

### Remove a volume

```bash
docker volume rm volume-name
```

> â— Volume must **not be attached** to any container

### Remove multiple volumes

```bash
docker volume rm vol1 vol2 vol3
```

### Remove unused volumes

```bash
docker volume prune
```

---

## ğŸ§ª Practical: Docker Volume with Container

### Step 1: Create volume

```bash
docker volume create swiggy
```

### Step 2: Inspect volume

```bash
docker volume inspect swiggy
```

Sample output:

```json
"Mountpoint": "/var/lib/docker/volumes/swiggy/_data"
```

---

### Step 3: Run container with volume

```bash
docker run -itd --name cont1 \
--mount src=swiggy,destination=/myapp \
ubuntu
```

### Step 4: Enter container

```bash
docker exec -it cont1 bash
```

### Step 5: Create files inside container

```bash
cd /myapp
touch file{1..4}
mkdir devops{1..3}
ls
```

---

### Step 6: Verify data on host

```bash
cd /var/lib/docker/volumes/swiggy/_data/
ls
```

âœ” Data is shared **container â†” volume â†” host**

---

## ğŸ”„ Two-Way Data Sync (Important)

- Changes in container â†’ reflected on host
- Changes on host â†’ reflected in container
- Can be **mounted to multiple containers**

---

## ğŸ”— Bind Mounts (Host â†” Container)

Bind mounts map a **host directory directly** into a container.

### Use case

- Development environments
- Live code reload
- Avoid rebuilding images

### âš ï¸ Risk

- Container can **modify host files**
- Security risk in production

---

### Practical: Bind Mount

#### Step 1: Create directory on host

```bash
mkdir zomato && cd zomato
touch index.html app.py style.css requirements.txt
```

#### Step 2: Run container

```bash
docker run -itd --name cont2 \
-v "$(pwd)":/appcode \
ubuntu
```

#### Step 3: Verify inside container

```bash
docker exec -it cont2 bash
cd /appcode
ls
```

âœ” Files visible in both host & container

---

## ğŸ” Read-Only Volumes

Used when:

- Container should **only read**
- Prevent accidental writes
- Security-sensitive workloads

### Create container with read-only volume

```bash
docker run -itd --name mustafa \
-v uber:/app:ro \
ubuntu
```

- `uber` â†’ volume name
- `/app` â†’ container path
- `ro` â†’ read-only

### Test inside container

```bash
docker exec -it mustafa bash
cd /app
touch test.txt   # âŒ Permission denied
```

âœ” Host can write, container cannot

---

## ğŸ” Sharing Volumes Between Containers

### Share volume from another container

```bash
docker run -itd --name devops \
--volumes-from=mustafa \
ubuntu
```

âœ” `devops` container now uses volumes of `mustafa`

---

## ğŸ§¾ Volumes in Dockerfile

Volumes can be declared inside Dockerfile.

```dockerfile
FROM ubuntu
VOLUME /mycode
```

- Docker creates a **random volume**
- Volume is attached automatically when container runs

---

## ğŸš€ Real-World Examples

---

### Example 1: Apache + Docker Volume

```bash
docker volume create paytm
```

Add files:

```bash
cd /var/lib/docker/volumes/paytm/_data/
```

Run container:

```bash
docker run -itd --name freelancer \
-p 1234:80 \
--mount src=paytm,destination=/usr/local/apache2/htdocs/ \
httpd
```

Access:

```
http://localhost:1234
```

---

### Example 2: Nginx + Bind Mount

```bash
mkdir testapp && cd testapp
```

Run container:

```bash
docker run -itd --name cont99 \
-p 1122:80 \
-v "$(pwd)":/usr/share/nginx/html \
nginx
```

Access:

```
http://localhost:1122
```

---

### Example 3: Auto-Create Volume with Container

```bash
docker run -itd --name app-container \
-p 2233:80 \
-v mydata:/usr/share/nginx/html \
nginx
```

Modify content:

```bash
cd /var/lib/docker/volumes/mydata/_data/
```

Refresh browser to see changes.

---

## ğŸ§  Summary

- **Volumes** â†’ Best for production data persistence
- **Bind mounts** â†’ Best for development
- **Read-only volumes** â†’ Security control
- Volumes can be:

  - Shared across containers
  - Managed independently
  - Created via CLI or Dockerfile

---

If you want next:

- **Docker Volumes vs Kubernetes PV/PVC**
- **Real interview questions**
- **Production best practices**
- **Docker volume backup & restore**

Just tell me ğŸ‘
